<div class="container" style="padding: 3rem 1rem;">
  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; margin-bottom: 3rem;">
    <!-- Product Image -->
    <div>
      {% if product.featured_image %}
        <img src="{{ product.featured_image | img_url: '600x600' }}" alt="{{ product.title }}" style="width: 100%; border-radius: 10px;">
      {% endif %}
      
      <!-- Product Image Gallery -->
      {% if product.images.size > 1 %}
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-top: 1rem;">
          {% for image in product.images limit: 4 %}
            <img src="{{ image | img_url: '150x150' }}" alt="{{ product.title }}" style="width: 100%; border-radius: 8px; cursor: pointer;">
          {% endfor %}
        </div>
      {% endif %}
    </div>

    <!-- Product Details -->
    <div>
      <div style="margin-bottom: 1rem;">
        <span style="color: #B9431F; font-size: 13px; text-transform: uppercase;">{{ product.type }}</span>
      </div>
      
      <h1 style="font-size: 41px; margin-bottom: 1rem;">{{ product.title }}</h1>
      
      <!-- Price -->
      <div style="margin-bottom: 1.5rem;">
        <span style="font-size: 24px; font-weight: 600; color: #333;">
          ${{ product.price | money_without_currency }}
        </span>
        {% if product.compare_at_price %}
          <span style="font-size: 16px; color: #4D4D4D; text-decoration: line-through; margin-left: 1rem;">
            ${{ product.compare_at_price | money_without_currency }}
          </span>
        {% endif %}
      </div>

      <!-- Product Description -->
      <div style="margin-bottom: 2rem; line-height: 1.8;">
        {{ product.description }}
      </div>

      <!-- Variants/Options -->
      {% if product.variants.size > 1 %}
        <div style="margin-bottom: 1.5rem;">
          <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Options:</label>
          <select id="variant-select" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px; font-size: 14px;">
            {% for variant in product.variants %}
              <option value="{{ variant.id }}">
                {% if variant.title != 'Default Title' %}
                  {{ variant.title }}
                {% else %}
                  Select an option
                {% endif %}
              </option>
            {% endfor %}
          </select>
        </div>
      {% endif %}

      <!-- Quantity Selector -->
      <div style="margin-bottom: 1.5rem; display: flex; gap: 1rem; align-items: center;">
        <label style="font-weight: 600;">Quantity:</label>
        <input type="number" id="quantity" value="1" min="1" style="width: 80px; padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px;">
      </div>

      <!-- Add to Cart Button -->
      <form method="post" action="/cart/add" style="margin-bottom: 1.5rem;">
        <input type="hidden" name="id" id="variant-id" value="{{ product.variants.first.id }}">
        <input type="hidden" name="quantity" id="quantity-input" value="1">
        <button type="submit" class="add-to-cart-btn" style="width: 100%; padding: 1rem; font-size: 16px;">
          ADD TO CART
        </button>
      </form>

      <!-- Additional Info -->
      <div style="border-top: 1px solid #ddd; padding-top: 1.5rem;">
        <p style="font-size: 14px; color: #666; margin-bottom: 1rem;">
          <strong>SKU:</strong> {{ product.selected_or_first_available_variant.sku }}
        </p>
        <p style="font-size: 14px; color: #666;">
          <strong>Availability:</strong> 
          {% if product.available %}
            <span style="color: #2ecc71;">In Stock</span>
          {% else %}
            <span style="color: #e74c3c;">Out of Stock</span>
          {% endif %}
        </p>
      </div>
    </div>
  </div>

  <!-- Related Products -->
  {% if product.related_products.size > 0 %}
    <section style="margin-top: 4rem;">
      <h2 style="margin-bottom: 2rem;">Related Products</h2>
      <div class="product-grid">
        {% for related_product in product.related_products limit: 4 %}
          <div class="product-card">
            <div class="product-image">
              {% if related_product.featured_image %}
                <img src="{{ related_product.featured_image | img_url: '300x300' }}" alt="{{ related_product.title }}">
              {% endif %}
            </div>
            <div class="product-info">
              <h3 class="product-name">{{ related_product.title }}</h3>
              <div class="product-price">
                <span class="price">${{ related_product.price | money_without_currency }}</span>
              </div>
              <a href="{{ related_product.url }}" class="add-to-cart-btn" style="display: block; text-align: center;">View Product</a>
            </div>
          </div>
        {% endfor %}
      </div>
    </section>
  {% endif %}
</div>

<script>
  // Update variant ID when selection changes
  const variantSelect = document.getElementById('variant-select');
  if (variantSelect) {
    variantSelect.addEventListener('change', function() {
      document.getElementById('variant-id').value = this.value;
    });
  }

  // Update quantity input
  const quantityInput = document.getElementById('quantity');
  if (quantityInput) {
    quantityInput.addEventListener('change', function() {
      document.getElementById('quantity-input').value = this.value;
    });
  }
</script>
